<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Checkout | E-Shopper</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <link href="css/prettyPhoto.css" rel="stylesheet" />
    <link href="css/price-range.css" rel="stylesheet" />
    <link href="css/animate.css" rel="stylesheet" />
    <link href="css/main.css" rel="stylesheet" />
    <link href="css/responsive.css" rel="stylesheet" />
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="images/ico/favicon.ico" />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="144x144"
      href="images/ico/apple-touch-icon-144-precomposed.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="114x114"
      href="images/ico/apple-touch-icon-114-precomposed.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="72x72"
      href="images/ico/apple-touch-icon-72-precomposed.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      href="images/ico/apple-touch-icon-57-precomposed.png"
    />
    <style>
      /* Estilo del menú desplegable */

      #submenuVer {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
        z-index: 1;
        padding: 10px;
        border-radius: 5px;
      }

      #submenuVer li {
        list-style: none;
      }

      #submenuVer li a {
        text-decoration: none;
        padding: 8px;
        display: block;
        color: #333;
      }

      #submenuVer li a:hover {
        background-color: #ddd;
      }
    </style></head
  ><!--/head-->

  <body>
    <header id="header">
      <!--header-->
      <div class="header_top">
        <!--header_top-->
        <div class="container">
          <div class="row">
            <div class="col-sm-6">
              <div class="contactinfo">
                <ul class="nav nav-pills">
                  <li>
                    <a href=""><i class="fa fa-phone"></i> +2 95 01 88 821</a>
                  </li>
                  <li>
                    <a href=""
                      ><i class="fa fa-envelope"></i> info@domain.com</a
                    >
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="social-icons pull-right">
                <ul class="nav navbar-nav">
                  <li>
                    <a href=""><i class="fa fa-facebook"></i></a>
                  </li>
                  <li>
                    <a href=""><i class="fa fa-twitter"></i></a>
                  </li>
                  <li>
                    <a href=""><i class="fa fa-linkedin"></i></a>
                  </li>
                  <li>
                    <a href=""><i class="fa fa-dribbble"></i></a>
                  </li>
                  <li>
                    <a href=""><i class="fa fa-google-plus"></i></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--/header_top-->

      <div class="header-middle">
        <!--header-middle-->
        <div class="container">
          <div class="row">
            <div class="col-sm-4">
              <div class="logo pull-left">
                <a href="index.html"
                  ><img src="images/home/logo.png" alt=""
                /></a>
              </div>
              <div class="btn-group pull-right">
                <div class="btn-group">
                  <button
                    type="button"
                    class="btn btn-default dropdown-toggle usa"
                    data-toggle="dropdown"
                  >
                    USA
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a href="">Canada</a></li>
                    <li><a href="">UK</a></li>
                  </ul>
                </div>

                <div class="btn-group">
                  <button
                    type="button"
                    class="btn btn-default dropdown-toggle usa"
                    data-toggle="dropdown"
                  >
                    DOLLAR
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu">
                    <li><a href="">Canadian Dollar</a></li>
                    <li><a href="">Pound</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-sm-8">
              <div class="shop-menu pull-right">
                <ul class="nav navbar-nav">
                  <li>
                    <a href="javascript:void(0);" id="accountLink"
                      ><i class="fa fa-user"></i> Account</a
                    >
                  </li>
                  <p
                    id="accountMessage"
                    style="color: red; display: none; margin-left: 10px"
                  ></p>
                  <li class="dropdown">
                    <a
                      href="#"
                      id="verMenu"
                      class="dropdown-toggle"
                      data-toggle="dropdown"
                      ><i class="fa fa-star"></i> Ver <b class="caret"></b
                    ></a>
                    <ul class="dropdown-menu" id="submenuVer">
                      <li><a href="#" id="verPedidos">Pedidos</a></li>
                      <li><a href="#" id="verProductos">Productos</a></li>
                    </ul>
                  </li>
                  <li>
                    <a href="checkout.html"
                      ><i class="fa fa-crosshairs"></i> Checkout</a
                    >
                  </li>
                  <li>
                    <a href="cart.html"
                      ><i class="fa fa-shopping-cart"></i> Cart</a
                    >
                  </li>
                  <li>
                    <a href="login.html"><i class="fa fa-lock"></i> Login</a>
                  </li>
                  <li>
                    <a href="javascript:void(0);" id="exportLink"
                      ><i class="fa fa-file-pdf-o"></i> Exportar</a
                    >
                  </li>
                  <li>
                    <a href="javascript:void(0);" id="chartsLink"
                      ><i class="fa fa-bar-chart"></i> Gráficos</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--/header-middle-->

      <div class="header-bottom">
        <!--header-bottom-->
        <div class="container">
          <div class="row">
            <div class="col-sm-9">
              <div class="navbar-header">
                <button
                  type="button"
                  class="navbar-toggle"
                  data-toggle="collapse"
                  data-target=".navbar-collapse"
                >
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
              </div>
              <div class="mainmenu pull-left">
                <ul class="nav navbar-nav collapse navbar-collapse">
                  <li><a href="index.html">Home</a></li>
                  <li class="dropdown">
                    <a href="#">Shop<i class="fa fa-angle-down"></i></a>
                    <ul role="menu" class="sub-menu">
                      <li><a href="shop.html">Products</a></li>
                      <li>
                        <a href="product-details.html">Product Details</a>
                      </li>
                      <li>
                        <a href="checkout.html" class="active">Checkout</a>
                      </li>
                      <li><a href="cart.html">Cart</a></li>
                      <li><a href="login.html">Login</a></li>
                      <li><a href="export.html">Exportar</a></li>
                      <li><a href="charts.html">Gráficos</a></li>
                    </ul>
                  </li>
                  <li class="dropdown">
                    <a href="#">Blog<i class="fa fa-angle-down"></i></a>
                    <ul role="menu" class="sub-menu">
                      <li><a href="blog.html">Blog List</a></li>
                      <li><a href="blog-single.html">Blog Single</a></li>
                    </ul>
                  </li>
                  <li><a href="404.html">404</a></li>
                  <li><a href="contact-us.html">Contact</a></li>
                </ul>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="search_box pull-right">
                <input type="text" placeholder="Search" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--/header-bottom-->
    </header>
    <!--/header-->

    <section id="cart_items">
      <div class="container">
        <div class="breadcrumbs">
          <ol class="breadcrumb">
            <li><a href="#">Home</a></li>
            <li class="active">Check out</li>
          </ol>
        </div>
        <!--/breadcrums-->

        <div class="step-one">
          <h2 class="heading">Step1</h2>
        </div>
        <div class="checkout-options">
          <h3>New User</h3>
          <p>Checkout options</p>
          <ul class="nav">
            <li>
              <label><input type="checkbox" /> Register Account</label>
            </li>
            <li>
              <label><input type="checkbox" /> Guest Checkout</label>
            </li>
            <li>
              <a href=""><i class="fa fa-times"></i>Cancel</a>
            </li>
          </ul>
        </div>
        <!--/checkout-options-->

        <div class="register-req">
          <p>
            Please use Register And Checkout to easily get access to your order
            history, or use Checkout as Guest
          </p>
        </div>
        <!--/register-req-->

        <div class="shopper-informations">
          <div class="row">
            <div class="col-sm-3">
              <div class="shopper-info">
                <p>Shopper Information</p>
                <form>
                  <input type="text" placeholder="Display Name" />
                  <input type="text" placeholder="User Name" />
                  <input type="password" placeholder="Password" />
                  <input type="password" placeholder="Confirm password" />
                </form>
                <a class="btn btn-primary" href="">Get Quotes</a>
                <a class="btn btn-primary" href="">Continue</a>
              </div>
            </div>
            <div class="col-sm-5 clearfix">
              <div class="bill-to">
                <p>Bill To</p>
                <div class="form-one">
                  <form>
                    <input type="text" placeholder="Company Name" />
                    <input type="text" placeholder="Email*" />
                    <input type="text" placeholder="Title" />
                    <input type="text" placeholder="First Name *" />
                    <input type="text" placeholder="Middle Name" />
                    <input type="text" placeholder="Last Name *" />
                    <input type="text" placeholder="Address 1 *" />
                    <input type="text" placeholder="Address 2" />
                  </form>
                </div>
                <div class="form-two">
                  <form>
                    <input type="text" placeholder="Zip / Postal Code *" />
                    <select>
                      <option>-- Country --</option>
                      <option>United States</option>
                      <option>Bangladesh</option>
                      <option>UK</option>
                      <option>India</option>
                      <option>Pakistan</option>
                      <option>Ucrane</option>
                      <option>Canada</option>
                      <option>Dubai</option>
                    </select>
                    <select>
                      <option>-- State / Province / Region --</option>
                      <option>United States</option>
                      <option>Bangladesh</option>
                      <option>UK</option>
                      <option>India</option>
                      <option>Pakistan</option>
                      <option>Ucrane</option>
                      <option>Canada</option>
                      <option>Dubai</option>
                    </select>
                    <input type="password" placeholder="Confirm password" />
                    <input type="text" placeholder="Phone *" />
                    <input type="text" placeholder="Mobile Phone" />
                    <input type="text" placeholder="Fax" />
                  </form>
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="order-message">
                <p>Shipping Order</p>
                <textarea
                  name="message"
                  placeholder="Notes about your order, Special Notes for Delivery"
                  rows="16"
                ></textarea>
                <label
                  ><input type="checkbox" /> Shipping to bill address</label
                >
              </div>
            </div>
          </div>
        </div>
        <div class="review-payment">
          <h2>Review & Payment</h2>
        </div>

        <div class="table-responsive cart_info">
          <table class="table table-condensed">
            <thead>
              <tr class="cart_menu">
                <td class="image">Item</td>
                <td class="description"></td>
                <td class="price">Price</td>
                <td class="quantity">Quantity</td>
                <td class="total">Total</td>
                <td></td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="cart_product">
                  <a href=""><img src="images/cart/one.png" alt="" /></a>
                </td>
                <td class="cart_description">
                  <h4><a href="">Colorblock Scuba</a></h4>
                  <p>Web ID: 1089772</p>
                </td>
                <td class="cart_price">
                  <p>$59</p>
                </td>
                <td class="cart_quantity">
                  <div class="cart_quantity_button">
                    <a class="cart_quantity_up" href=""> + </a>
                    <input
                      class="cart_quantity_input"
                      type="text"
                      name="quantity"
                      value="1"
                      autocomplete="off"
                      size="2"
                    />
                    <a class="cart_quantity_down" href=""> - </a>
                  </div>
                </td>
                <td class="cart_total">
                  <p class="cart_total_price">$59</p>
                </td>
                <td class="cart_delete">
                  <a class="cart_quantity_delete" href=""
                    ><i class="fa fa-times"></i
                  ></a>
                </td>
              </tr>

              <tr>
                <td class="cart_product">
                  <a href=""><img src="images/cart/two.png" alt="" /></a>
                </td>
                <td class="cart_description">
                  <h4><a href="">Colorblock Scuba</a></h4>
                  <p>Web ID: 1089772</p>
                </td>
                <td class="cart_price">
                  <p>$59</p>
                </td>
                <td class="cart_quantity">
                  <div class="cart_quantity_button">
                    <a class="cart_quantity_up" href=""> + </a>
                    <input
                      class="cart_quantity_input"
                      type="text"
                      name="quantity"
                      value="1"
                      autocomplete="off"
                      size="2"
                    />
                    <a class="cart_quantity_down" href=""> - </a>
                  </div>
                </td>
                <td class="cart_total">
                  <p class="cart_total_price">$59</p>
                </td>
                <td class="cart_delete">
                  <a class="cart_quantity_delete" href=""
                    ><i class="fa fa-times"></i
                  ></a>
                </td>
              </tr>
              <tr>
                <td class="cart_product">
                  <a href=""><img src="images/cart/three.png" alt="" /></a>
                </td>
                <td class="cart_description">
                  <h4><a href="">Colorblock Scuba</a></h4>
                  <p>Web ID: 1089772</p>
                </td>
                <td class="cart_price">
                  <p>$59</p>
                </td>
                <td class="cart_quantity">
                  <div class="cart_quantity_button">
                    <a class="cart_quantity_up" href=""> + </a>
                    <input
                      class="cart_quantity_input"
                      type="text"
                      name="quantity"
                      value="1"
                      autocomplete="off"
                      size="2"
                    />
                    <a class="cart_quantity_down" href=""> - </a>
                  </div>
                </td>
                <td class="cart_total">
                  <p class="cart_total_price">$59</p>
                </td>
                <td class="cart_delete">
                  <a class="cart_quantity_delete" href=""
                    ><i class="fa fa-times"></i
                  ></a>
                </td>
              </tr>
              <tr>
                <td colspan="4">&nbsp;</td>
                <td colspan="2">
                  <table class="table table-condensed total-result">
                    <tr>
                      <td>Cart Sub Total</td>
                      <td>$59</td>
                    </tr>
                    <tr>
                      <td>Exo Tax</td>
                      <td>$2</td>
                    </tr>
                    <tr class="shipping-cost">
                      <td>Shipping Cost</td>
                      <td>Free</td>
                    </tr>
                    <tr>
                      <td>Total</td>
                      <td><span>$61</span></td>
                    </tr>
                  </table>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="payment-options">
          <span>
            <label><input type="checkbox" /> Direct Bank Transfer</label>
          </span>
          <span>
            <label><input type="checkbox" /> Check Payment</label>
          </span>
          <span>
            <label><input type="checkbox" /> Paypal</label>
          </span>
        </div>
      </div>
    </section>
    <!--/#cart_items-->

    <footer id="footer">
      <!--Footer-->
      <div class="footer-top">
        <div class="container">
          <div class="row">
            <div class="col-sm-2">
              <div class="companyinfo">
                <h2><span>e</span>-shopper</h2>
                <p>
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit,sed
                  do eiusmod tempor
                </p>
              </div>
            </div>
            <div class="col-sm-7">
              <div class="col-sm-3">
                <div class="video-gallery text-center">
                  <a href="#">
                    <div class="iframe-img">
                      <img src="images/home/iframe1.png" alt="" />
                    </div>
                    <div class="overlay-icon">
                      <i class="fa fa-play-circle-o"></i>
                    </div>
                  </a>
                  <p>Circle of Hands</p>
                  <h2>24 DEC 2014</h2>
                </div>
              </div>

              <div class="col-sm-3">
                <div class="video-gallery text-center">
                  <a href="#">
                    <div class="iframe-img">
                      <img src="images/home/iframe2.png" alt="" />
                    </div>
                    <div class="overlay-icon">
                      <i class="fa fa-play-circle-o"></i>
                    </div>
                  </a>
                  <p>Circle of Hands</p>
                  <h2>24 DEC 2014</h2>
                </div>
              </div>

              <div class="col-sm-3">
                <div class="video-gallery text-center">
                  <a href="#">
                    <div class="iframe-img">
                      <img src="images/home/iframe3.png" alt="" />
                    </div>
                    <div class="overlay-icon">
                      <i class="fa fa-play-circle-o"></i>
                    </div>
                  </a>
                  <p>Circle of Hands</p>
                  <h2>24 DEC 2014</h2>
                </div>
              </div>

              <div class="col-sm-3">
                <div class="video-gallery text-center">
                  <a href="#">
                    <div class="iframe-img">
                      <img src="images/home/iframe4.png" alt="" />
                    </div>
                    <div class="overlay-icon">
                      <i class="fa fa-play-circle-o"></i>
                    </div>
                  </a>
                  <p>Circle of Hands</p>
                  <h2>24 DEC 2014</h2>
                </div>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="address">
                <img src="images/home/map.png" alt="" />
                <p>505 S Atlantic Ave Virginia Beach, VA(Virginia)</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-widget">
        <div class="container">
          <div class="row">
            <div class="col-sm-2">
              <div class="single-widget">
                <h2>Service</h2>
                <ul class="nav nav-pills nav-stacked">
                  <li><a href="">Online Help</a></li>
                  <li><a href="">Contact Us</a></li>
                  <li><a href="">Order Status</a></li>
                  <li><a href="">Change Location</a></li>
                  <li><a href="">FAQ’s</a></li>
                </ul>
              </div>
            </div>
            <div class="col-sm-2">
              <div class="single-widget">
                <h2>Quock Shop</h2>
                <ul class="nav nav-pills nav-stacked">
                  <li><a href="">T-Shirt</a></li>
                  <li><a href="">Mens</a></li>
                  <li><a href="">Womens</a></li>
                  <li><a href="">Gift Cards</a></li>
                  <li><a href="">Shoes</a></li>
                </ul>
              </div>
            </div>
            <div class="col-sm-2">
              <div class="single-widget">
                <h2>Policies</h2>
                <ul class="nav nav-pills nav-stacked">
                  <li><a href="">Terms of Use</a></li>
                  <li><a href="">Privecy Policy</a></li>
                  <li><a href="">Refund Policy</a></li>
                  <li><a href="">Billing System</a></li>
                  <li><a href="">Ticket System</a></li>
                </ul>
              </div>
            </div>
            <div class="col-sm-2">
              <div class="single-widget">
                <h2>About Shopper</h2>
                <ul class="nav nav-pills nav-stacked">
                  <li><a href="">Company Information</a></li>
                  <li><a href="">Careers</a></li>
                  <li><a href="">Store Location</a></li>
                  <li><a href="">Affillate Program</a></li>
                  <li><a href="">Copyright</a></li>
                </ul>
              </div>
            </div>
            <div class="col-sm-3 col-sm-offset-1">
              <div class="single-widget">
                <h2>About Shopper</h2>
                <form action="#" class="searchform">
                  <input type="text" placeholder="Your email address" />
                  <button type="submit" class="btn btn-default">
                    <i class="fa fa-arrow-circle-o-right"></i>
                  </button>
                  <p>
                    Get the most recent updates from <br />our site and be
                    updated your self...
                  </p>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="container">
          <div class="row">
            <p class="pull-left">
              Copyright © 2013 E-SHOPPER Inc. All rights reserved.
            </p>
            <p class="pull-right">
              Designed by
              <span
                ><a target="_blank" href="http://www.themeum.com"
                  >Themeum</a
                ></span
              >
            </p>
          </div>
        </div>
      </div>
    </footer>
    <!--/Footer-->

    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.scrollUp.min.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>
    <script src="js/main.js"></script>
    <script>
      $(document).ready(function () {
        $("#accountLink").on("click", function (e) {
          e.preventDefault();
          $.ajax({
            url: "session_check.php",
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.logged_in) {
                if (
                  window.location.pathname.indexOf("personal_page.html") === -1
                ) {
                  window.location.href = "/Eshopper/personal_page.html";
                }
              } else {
                $("#accountMessage")
                  .text("No has iniciado sesión. Redirigiendo...")
                  .show();
                setTimeout(() => {
                  window.location.href = "/Eshopper/login.html";
                }, 2000);
              }
            },
            error: function () {
              alert("Error en el servidor. Inténtalo más tarde.");
            },
          });
        });
      });
    </script>

    <script>
      $(document).ready(function () {
        $("#exportLink").on("click", function (e) {
          e.preventDefault();
          $.ajax({
            url: "session_check.php",
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.logged_in) {
                if (window.location.pathname.indexOf("export.html") === -1) {
                  window.location.href = "/Eshopper/export.html";
                }
              } else {
                $("#accountMessage")
                  .text("No has iniciado sesión. Redirigiendo...")
                  .show();
                setTimeout(() => {
                  window.location.href = "/Eshopper/login.html";
                }, 2000);
              }
            },
            error: function () {
              alert("Error en el servidor. Inténtalo más tarde.");
            },
          });
        });
      });
    </script>

    <script>
      $(document).ready(function () {
        $("#chartsLink").on("click", function (e) {
          e.preventDefault();
          $.ajax({
            url: "session_check.php",
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.logged_in) {
                if (window.location.pathname.indexOf("charts.html") === -1) {
                  window.location.href = "/Eshopper/charts.html";
                }
              } else {
                $("#accountMessage")
                  .text("No has iniciado sesión. Redirigiendo...")
                  .show();
                setTimeout(() => {
                  window.location.href = "/Eshopper/login.html";
                }, 2000);
              }
            },
            error: function () {
              alert("Error en el servidor. Inténtalo más tarde.");
            },
          });
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        $("#verMenu").click(function () {
          $("#submenuVer").toggle();
        });

        $("#verPedidos").click(function () {
          verificarSesion(() => {
            window.location.href = "ver.html?tipo=pedidos";
          });
        });

        $("#verProductos").click(function () {
          verificarSesion(() => {
            let selectedCategory = getSelectedCategory();
            window.location.href =
              "ver.html?tipo=productos&categoria=" + selectedCategory;
          });
        });
      });

      // Función para verificar si el usuario está logueado
      function verificarSesion(callback) {
        $.ajax({
          url: "session_check.php",
          method: "GET",
          dataType: "json",
          success: function (response) {
            if (response.logged_in) {
              callback(); // Usuario registrado, ejecutar acción
            } else {
              alert("Debes estar registrado para acceder a esta sección.");
            }
          },
          error: function () {
            alert("Error al verificar la sesión del usuario.");
          },
        });
      }

      function getSelectedCategory() {
        return typeof selectedCategory !== "undefined"
          ? selectedCategory
          : "all";
      }
    </script>

    <!--script: PDF productos-->
    <script>
      function toDataURL(url) {
        return new Promise((resolve, reject) => {
          const xhr = new XMLHttpRequest();
          xhr.onload = function () {
            const reader = new FileReader();
            reader.onloadend = function () {
              resolve(reader.result);
            };
            reader.onerror = reject;
            reader.readAsDataURL(xhr.response);
          };
          xhr.onerror = reject;
          xhr.open("GET", url);
          xhr.responseType = "blob";
          xhr.send();
        });
      }

      async function getHeaderContent() {
        const logoBase64 = await toDataURL("images/home/logo.png").catch(() => null);

        return {
          table: {
            widths: ["*", "*"],
            body: [
              [
                logoBase64
                  ? {
                      image: logoBase64,
                      width: 100,
                      margin: [10, 10, 0, 10],
                    }
                  : { text: "Logo", margin: [10, 10, 0, 10] },
                {
                  alignment: "right",
                  stack: [
                    {
                      text: "+2 95 01 88 821",
                      fontSize: 10,
                      margin: [0, 10, 10, 0],
                    },
                    {
                      text: "info@domain.com",
                      fontSize: 10,
                      margin: [0, 2, 10, 0],
                    },
                    {
                      text:
                        "Facebook | Twitter | LinkedIn | Dribbble | Google+",
                      fontSize: 9,
                      color: "gray",
                      margin: [0, 5, 10, 10],
                    },
                  ],
                },
              ],
            ],
          },
          layout: {
            fillColor: "#d9d6ce",
            hLineWidth: () => 0,
            vLineWidth: () => 0,
            paddingLeft: () => 35,
            paddingRight: () => 35,
            paddingTop: () => 20,
            paddingBottom: () => 25,
          },
          margin: [-40, -40, -40, 20],
        };
      }

      function getFooterDefinition() {
        return function (currentPage, pageCount) {
          return {
            columns: [
              {
                text: "© 2025 E-SHOPPER Inc. Todos los derechos reservados.",
                alignment: "left",
                fontSize: 9,
                margin: [40, 0, 0, 10],
                color: "#FFA500",
              },
              {
                text: `Diseñado por Themeum | Página ${currentPage} de ${pageCount}`,
                alignment: "right",
                fontSize: 9,
                margin: [0, 0, 40, 10],
                color: "#FFA500",
              },
            ],
          };
        };
      }

      async function generarPDFConProductos() {
        console.log("Exportar productos ..");
        try {
          const headerContent = await getHeaderContent();
          const response = await fetch("get_products_by_category.php?category=all");
          const data = await response.json();

          if (!data.success) {
            alert("Error al cargar productos.");
            return;
          }

          const products = data.products;

          const productsWithBase64 = await Promise.all(
            products.map(async (product) => {
              const base64Image = await toDataURL(product.image).catch(() => null);
              return {
                id: product.id,
                name: product.name,
                price: product.price,
                image: base64Image,
              };
            })
          );

          const bodyTable = [
            [
              { text: "ID", bold: true },
              { text: "Imagen", bold: true },
              { text: "Nombre", bold: true },
              { text: "Precio", bold: true },
            ],
          ];

          productsWithBase64.forEach((product) => {
            bodyTable.push([
              { text: product.id.toString() },
              product.image
                ? { image: product.image, width: 50, height: 50 }
                : { text: "No disponible" },
              { text: product.name },
              { text: `$${parseFloat(product.price).toFixed(2)}` },
            ]);
          });

          const docDefinition = {
            content: [
              headerContent,
              {
                text: "Listado de Productos",
                style: "header",
                margin: [0, 0, 0, 20],
              },
              {
                table: {
                  headerRows: 1,
                  widths: [50, 70, "*", 60],
                  body: bodyTable,
                },
              },
            ],
            styles: {
              header: {
                fontSize: 18,
                bold: true,
              },
            },
            footer: getFooterDefinition(),
          };

          pdfMake.createPdf(docDefinition).download("productos.pdf");
        } catch (error) {
          console.error("Error al generar el PDF:", error);
          alert("Ocurrió un error al generar el PDF.");
        }
      }

      document
        .getElementById("exportarProductos")
        .addEventListener("click", generarPDFConProductos);
    </script>


    <!--script: PDF pedidos-->
    <script>
      function toDataURL(url) {
        return new Promise((resolve, reject) => {
          const xhr = new XMLHttpRequest();
          xhr.onload = function () {
            const reader = new FileReader();
            reader.onloadend = function () {
              resolve(reader.result); // <-- resuelve en base64
            };
            reader.onerror = reject;
            reader.readAsDataURL(xhr.response);
          };
          xhr.onerror = reject;
          xhr.open("GET", url);
          xhr.responseType = "blob";
          xhr.send();
        });
      }
    
      async function generarPDFConPedidos() {
        console.log("Exportar pedidos ..");
        try {
          // 1. Obtener pedidos
          const response = await fetch("get_pedidos.php");
          const data = await response.json();
    
          console.log("Respuesta de get_pedidos.php:", data);
    
          if (!data.success) {
            alert("Error al cargar pedidos.");
            return;
          }
    
          const pedidos = data.pedidos;
    
          // 2. Crear estructura del PDF
          const bodyTable = [
            [
              { text: "ID", bold: true },
              { text: "Título", bold: true },
              { text: "Estado", bold: true },
              { text: "Precio Unidad", bold: true },
              { text: "Total", bold: true },
            ],
          ];
    
          pedidos.forEach((pedido) => {
            bodyTable.push([
              { text: pedido.id.toString() },
              { text: pedido.titulo },
              { text: pedido.estado },
              { text: `$${parseFloat(pedido.precio_unidad).toFixed(2)}` },
              { text: `$${parseFloat(pedido.total).toFixed(2)}` },
            ]);
          });
    
          const logoBase64 = await toDataURL("images/home/logo.png").catch(
            () => null
          );
    
          const docDefinition = {
            content: [
              {
                table: {
                  widths: ["*", "*"],
                  body: [
                    [
                      logoBase64
                        ? {
                            image: logoBase64,
                            width: 100,
                            margin: [10, 10, 0, 10],
                          }
                        : { text: "Logo", margin: [10, 10, 0, 10] },
                      {
                        alignment: "right",
                        stack: [
                          {
                            text: "+2 95 01 88 821",
                            fontSize: 10,
                            margin: [0, 10, 10, 0],
                          },
                          {
                            text: "info@domain.com",
                            fontSize: 10,
                            margin: [0, 2, 10, 0],
                          },
                          {
                            text: "Facebook | Twitter | LinkedIn | Dribbble | Google+",
                            fontSize: 9,
                            color: "gray",
                            margin: [0, 5, 10, 10],
                          },
                        ],
                      },
                    ],
                  ],
                },
                layout: {
                  fillColor: "#d9d6ce",
                  hLineWidth: () => 0,
                  vLineWidth: () => 0,
                  paddingLeft: () => 35,
                  paddingRight: () => 35,
                  paddingTop: () => 20,
                  paddingBottom: () => 25,
                },
                margin: [-40, -40, -40, 20],
              },
              {
                text: "Listado de Pedidos",
                style: "header",
                margin: [0, 0, 0, 20],
              },
              {
                table: {
                  headerRows: 1,
                  widths: [50, "*", "*", "*", "*"],
                  body: bodyTable,
                },
              },
            ],
            styles: {
              header: {
                fontSize: 18,
                bold: true,
              },
            },
            footer: function (currentPage, pageCount) {
              return {
                columns: [
                  {
                    text: "© 2025 E-SHOPPER Inc. Todos los derechos reservados.",
                    alignment: "left",
                    fontSize: 9,
                    margin: [40, 0, 0, 10],
                    color: "#FFA500", // texto naranja
                  },
                  {
                    text: `Diseñado por Themeum | Página ${currentPage} de ${pageCount}`,
                    alignment: "right",
                    fontSize: 9,
                    margin: [0, 0, 40, 10],
                    color: "#FFA500", // texto naranja
                  },
                ],
              };
            },
          };
    
          // 4. Generar PDF
          pdfMake.createPdf(docDefinition).download("pedidos.pdf");
        } catch (error) {
          console.error("Error al generar el PDF:", error);
          alert("Ocurrió un error al generar el PDF.");
        }
      }
    
      document
        .getElementById("exportarPedidos")
        .addEventListener("click", generarPDFConPedidos);
    </script>
  </body>
</html>
